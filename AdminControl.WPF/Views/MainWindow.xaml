<Window x:Class="AdminControl.WPF.Views.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:vm="clr-namespace:AdminControl.WPF.ViewModels"
        mc:Ignorable="d"
        Title="Admin Control Panel" Height="650" Width="1100"
        WindowStartupLocation="CenterScreen"
        MinHeight="500" MinWidth="800">

    <Grid>
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="220"/>
            <ColumnDefinition Width="*"/>
        </Grid.ColumnDefinitions>

        <Border Grid.Column="0" Background="#2C3E50">
            <Grid>
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="*"/>
                    <RowDefinition Height="Auto"/>
                </Grid.RowDefinitions>


                <StackPanel Grid.Row="0" Margin="15,20,15,30">
                    <TextBlock Text="ðŸ›¡ï¸ AdminPanel" 
                               Foreground="White" 
                               FontSize="22" 
                               FontWeight="Bold"/>
                    <TextBlock Text="{Binding CurrentUserInfo}" 
                               Foreground="#BDC3C7" 
                               FontSize="11" 
                               TextWrapping="Wrap"
                               Margin="0,8,0,0"/>
                </StackPanel>


                <StackPanel Grid.Row="1">
                    <Button Content="ðŸ‘¥ ÐšÐ¾Ñ€Ð¸ÑÑ‚ÑƒÐ²Ð°Ñ‡Ñ–" 
                            Style="{StaticResource MenuButtonStyle}"
                            Command="{Binding ShowUsersCommand}"/>
                    <Button Content="ðŸ” Ð Ð¾Ð»Ñ–" 
                            Style="{StaticResource MenuButtonStyle}"
                            Command="{Binding ShowRolesCommand}"
                            IsEnabled="{Binding IsAdmin}"/>
                    <Button Content="ðŸ“‹ Ð›Ð¾Ð³Ð¸ Ð´Ñ–Ð¹" 
                            Style="{StaticResource MenuButtonStyle}"
                            Command="{Binding ShowLogsCommand}"
                            IsEnabled="{Binding IsAdmin}"/>
                </StackPanel>

                <!-- ÐšÐ½Ð¾Ð¿ÐºÐ° Ð²Ð¸Ñ…Ð¾Ð´Ñƒ -->
                <StackPanel Grid.Row="2" Margin="0,0,0,20">
                    <Separator Background="#7F8C8D" Margin="10,0,10,15"/>
                    <Button Content="ðŸšª Ð’Ð¸Ð¹Ñ‚Ð¸" 
                            Style="{StaticResource MenuButtonStyle}" 
                            Background="#C0392B"
                            Command="{Binding LogoutCommand}"/>
                </StackPanel>
            </Grid>
        </Border>

        <Grid Grid.Column="1" Background="#ECF0F1" Margin="15">
            
            <Grid Visibility="{Binding IsUsersView, Converter={StaticResource BooleanToVisibilityConverter}}">
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="*"/>
                    <RowDefinition Height="Auto"/>
                </Grid.RowDefinitions>

                <StackPanel Grid.Row="0" Margin="0,0,0,15">
                    <TextBlock Text="Ð£Ð¿Ñ€Ð°Ð²Ð»Ñ–Ð½Ð½Ñ ÐºÐ¾Ñ€Ð¸ÑÑ‚ÑƒÐ²Ð°Ñ‡Ð°Ð¼Ð¸" 
                               FontSize="26" 
                               FontWeight="SemiBold" 
                               Foreground="#2C3E50"/>
                    <TextBlock Text="ÐŸÐµÑ€ÐµÐ³Ð»ÑÐ´, Ð´Ð¾Ð´Ð°Ð²Ð°Ð½Ð½Ñ Ñ‚Ð° Ñ€ÐµÐ´Ð°Ð³ÑƒÐ²Ð°Ð½Ð½Ñ ÐºÐ¾Ñ€Ð¸ÑÑ‚ÑƒÐ²Ð°Ñ‡Ñ–Ð² ÑÐ¸ÑÑ‚ÐµÐ¼Ð¸" 
                               Foreground="#7F8C8D" 
                               FontSize="13"
                               Margin="0,5,0,0"/>
                </StackPanel>

                <!-- Ð¢Ð°Ð±Ð»Ð¸Ñ†Ñ ÐºÐ¾Ñ€Ð¸ÑÑ‚ÑƒÐ²Ð°Ñ‡Ñ–Ð² -->
                <DataGrid Grid.Row="1"
                          ItemsSource="{Binding Users}"
                          SelectedItem="{Binding SelectedUser}"
                          AutoGenerateColumns="False"
                          IsReadOnly="True"
                          CanUserAddRows="False"
                          SelectionMode="Single"
                          Style="{StaticResource DataGridStyle}"
                          HeadersVisibility="Column">

                    <DataGrid.Columns>
                        <DataGridTextColumn Header="ID" 
                                            Binding="{Binding UserID}" 
                                            Width="50"/>
                        <DataGridTextColumn Header="Ð›Ð¾Ð³Ñ–Ð½" 
                                            Binding="{Binding Login}" 
                                            Width="120" 
                                            FontWeight="Bold"/>
                        <DataGridTextColumn Header="ÐŸÐ¾Ð²Ð½Ðµ Ñ–Ð¼'Ñ" 
                                            Binding="{Binding FullName}" 
                                            Width="*"/>
                        <DataGridTextColumn Header="Email" 
                                            Binding="{Binding Email}" 
                                            Width="180"/>
                        <DataGridTextColumn Header="Ð Ð¾Ð»ÑŒ" 
                                            Binding="{Binding RoleName}" 
                                            Width="100"/>
                        <DataGridCheckBoxColumn Header="ÐÐºÑ‚Ð¸Ð²Ð½Ð¸Ð¹" 
                                                Binding="{Binding IsActive}" 
                                                Width="80"/>
                    </DataGrid.Columns>
                </DataGrid>

                <!-- ÐŸÐ°Ð½ÐµÐ»ÑŒ Ð´Ñ–Ð¹ -->
                <Border Grid.Row="2" 
                        Background="White" 
                        CornerRadius="5" 
                        Padding="10" 
                        Margin="0,15,0,0">
                    <Grid>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="*"/>
                            <ColumnDefinition Width="Auto"/>
                        </Grid.ColumnDefinitions>

                        <!-- Ð†Ð½Ñ„Ð¾Ñ€Ð¼Ð°Ñ†Ñ–Ñ Ð¿Ñ€Ð¾ Ð²Ð¸Ð±Ñ€Ð°Ð½Ð¾Ð³Ð¾ ÐºÐ¾Ñ€Ð¸ÑÑ‚ÑƒÐ²Ð°Ñ‡Ð° -->
                        <StackPanel Orientation="Horizontal" VerticalAlignment="Center">
                            <TextBlock Text="Ð’Ð¸Ð±Ñ€Ð°Ð½Ð¾: " Foreground="#7F8C8D"/>
                            <TextBlock Text="{Binding SelectedUser.FullName, FallbackValue='ÐÑ–ÐºÐ¾Ð³Ð¾ Ð½Ðµ Ð²Ð¸Ð±Ñ€Ð°Ð½Ð¾'}" 
                                       FontWeight="Bold" 
                                       Foreground="#2C3E50"/>
                        </StackPanel>

                        <!-- ÐšÐ½Ð¾Ð¿ÐºÐ¸ Ð´Ñ–Ð¹ -->
                        <StackPanel Grid.Column="1" Orientation="Horizontal">
                            <Button Content="ðŸ”„ ÐžÐ½Ð¾Ð²Ð¸Ñ‚Ð¸" 
                                    Command="{Binding ReloadCommand}"
                                    Width="100"/>
                            <Button Content="âž• Ð”Ð¾Ð´Ð°Ñ‚Ð¸" 
                                    Command="{Binding AddUserCommand}"
                                    Style="{StaticResource AddButtonStyle}"
                                    Width="100"
                                    IsEnabled="{Binding CanEdit}"/>
                            <Button Content="âœï¸ Ð ÐµÐ´Ð°Ð³ÑƒÐ²Ð°Ñ‚Ð¸" 
                                    Command="{Binding EditUserCommand}"
                                    Width="110"
                                    IsEnabled="{Binding CanEdit}"/>
                            <Button Content="ðŸ—‘ï¸ Ð’Ð¸Ð´Ð°Ð»Ð¸Ñ‚Ð¸" 
                                    Command="{Binding DeleteUserCommand}"
                                    Style="{StaticResource DeleteButtonStyle}"
                                    Width="100"
                                    IsEnabled="{Binding CanDelete}"/>
                        </StackPanel>
                    </Grid>
                </Border>
            </Grid>

            <!-- Ð¡ÐµÐºÑ†Ñ–Ñ Ñ€Ð¾Ð»ÐµÐ¹ -->
            <Grid Visibility="{Binding IsRolesView, Converter={StaticResource BooleanToVisibilityConverter}}">
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="*"/>
                    <RowDefinition Height="Auto"/>
                </Grid.RowDefinitions>

                <!-- Ð—Ð°Ð³Ð¾Ð»Ð¾Ð²Ð¾Ðº -->
                <StackPanel Grid.Row="0" Margin="0,0,0,15">
                    <TextBlock Text="ðŸ” Ð£Ð¿Ñ€Ð°Ð²Ð»Ñ–Ð½Ð½Ñ Ñ€Ð¾Ð»ÑÐ¼Ð¸" 
                               FontSize="26" 
                               FontWeight="SemiBold" 
                               Foreground="#2C3E50"/>
                    <TextBlock Text="Ð¡Ñ‚Ð²Ð¾Ñ€ÐµÐ½Ð½Ñ, Ñ€ÐµÐ´Ð°Ð³ÑƒÐ²Ð°Ð½Ð½Ñ Ñ‚Ð° Ð²Ð¸Ð´Ð°Ð»ÐµÐ½Ð½Ñ Ñ€Ð¾Ð»ÐµÐ¹ ÐºÐ¾Ñ€Ð¸ÑÑ‚ÑƒÐ²Ð°Ñ‡Ñ–Ð²" 
                               Foreground="#7F8C8D" 
                               FontSize="13"
                               Margin="0,5,0,0"/>
                </StackPanel>
                
                <!-- Ð¡Ð¿Ð¸ÑÐ¾Ðº Ñ€Ð¾Ð»ÐµÐ¹ -->
                <DataGrid Grid.Row="1"
                          ItemsSource="{Binding Roles}"
                          SelectedItem="{Binding SelectedRole}"
                          AutoGenerateColumns="False"
                          IsReadOnly="True"
                          CanUserAddRows="False"
                          SelectionMode="Single"
                          Style="{StaticResource DataGridStyle}"
                          HeadersVisibility="Column">
                    <DataGrid.Columns>
                        <DataGridTextColumn Header="ID" Binding="{Binding RoleID}" Width="80"/>
                        <DataGridTextColumn Header="ÐÐ°Ð·Ð²Ð° Ñ€Ð¾Ð»Ñ–" Binding="{Binding RoleName}" Width="*"/>
                    </DataGrid.Columns>
                </DataGrid>

                <!-- ÐŸÐ°Ð½ÐµÐ»ÑŒ Ð´Ñ–Ð¹ Ð´Ð»Ñ Ñ€Ð¾Ð»ÐµÐ¹ -->
                <Border Grid.Row="2" 
                        Background="White" 
                        CornerRadius="5" 
                        Padding="10" 
                        Margin="0,15,0,0">
                    <Grid>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="*"/>
                            <ColumnDefinition Width="Auto"/>
                        </Grid.ColumnDefinitions>

                        <StackPanel Orientation="Horizontal" VerticalAlignment="Center">
                            <TextBlock Text="Ð’Ð¸Ð±Ñ€Ð°Ð½Ð¾: " Foreground="#7F8C8D"/>
                            <TextBlock Text="{Binding SelectedRole.RoleName, FallbackValue='ÐÑ–Ñ‡Ð¾Ð³Ð¾ Ð½Ðµ Ð²Ð¸Ð±Ñ€Ð°Ð½Ð¾'}" 
                                       FontWeight="Bold" 
                                       Foreground="#2C3E50"/>
                        </StackPanel>

                        <StackPanel Grid.Column="1" Orientation="Horizontal">
                            <Button Content="âž• Ð”Ð¾Ð´Ð°Ñ‚Ð¸" 
                                    Command="{Binding AddRoleCommand}"
                                    Style="{StaticResource AddButtonStyle}"
                                    Width="100"/>
                            <Button Content="âœï¸ Ð ÐµÐ´Ð°Ð³ÑƒÐ²Ð°Ñ‚Ð¸" 
                                    Command="{Binding EditRoleCommand}"
                                    Width="110"/>
                            <Button Content="ðŸ—‘ï¸ Ð’Ð¸Ð´Ð°Ð»Ð¸Ñ‚Ð¸" 
                                    Command="{Binding DeleteRoleCommand}"
                                    Style="{StaticResource DeleteButtonStyle}"
                                    Width="100"/>
                        </StackPanel>
                    </Grid>
                </Border>
            </Grid>

            <!-- Ð¡ÐµÐºÑ†Ñ–Ñ Ð»Ð¾Ð³Ñ–Ð² -->
            <Grid Visibility="{Binding IsLogsView, Converter={StaticResource BooleanToVisibilityConverter}}">
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="*"/>
                </Grid.RowDefinitions>

                <!-- Ð—Ð°Ð³Ð¾Ð»Ð¾Ð²Ð¾Ðº -->
                <StackPanel Grid.Row="0" Margin="0,0,0,15">
                    <TextBlock Text="ðŸ“‹ Ð–ÑƒÑ€Ð½Ð°Ð» Ð´Ñ–Ð¹" 
                               FontSize="26" 
                               FontWeight="SemiBold" 
                               Foreground="#2C3E50"/>
                    <TextBlock Text="ÐŸÐµÑ€ÐµÐ³Ð»ÑÐ´ Ñ–ÑÑ‚Ð¾Ñ€Ñ–Ñ— Ð´Ñ–Ð¹ Ð°Ð´Ð¼Ñ–Ð½Ñ–ÑÑ‚Ñ€Ð°Ñ‚Ð¾Ñ€Ñ–Ð²" 
                               Foreground="#7F8C8D" 
                               FontSize="13"
                               Margin="0,5,0,0"/>
                </StackPanel>

                <!-- Ð¢Ð°Ð±Ð»Ð¸Ñ†Ñ Ð»Ð¾Ð³Ñ–Ð² -->
                <DataGrid Grid.Row="1"
                          ItemsSource="{Binding ActionLogs}"
                          AutoGenerateColumns="False"
                          IsReadOnly="True"
                          CanUserAddRows="False"
                          Style="{StaticResource DataGridStyle}"
                          HeadersVisibility="Column">
                    <DataGrid.Columns>
                        <DataGridTextColumn Header="ID" Binding="{Binding LogID}" Width="50"/>
                        <DataGridTextColumn Header="Ð”Ð°Ñ‚Ð°" Binding="{Binding CreatedAt, StringFormat={}{0:dd.MM.yyyy HH:mm}}" Width="130"/>
                        <DataGridTextColumn Header="ÐÐ´Ð¼Ñ–Ð½Ñ–ÑÑ‚Ñ€Ð°Ñ‚Ð¾Ñ€" Binding="{Binding AdminUserName}" Width="150"/>
                        <DataGridTextColumn Header="Ð”Ñ–Ñ" Binding="{Binding ActionDescription}" Width="200"/>
                        <DataGridTextColumn Header="Ð¦Ñ–Ð»ÑŒ" Binding="{Binding TargetUserName}" Width="150"/>
                        <DataGridTextColumn Header="ÐŸÑ€Ð¸Ñ‡Ð¸Ð½Ð°" Binding="{Binding Reason}" Width="*"/>
                    </DataGrid.Columns>
                </DataGrid>
            </Grid>
        </Grid>
    </Grid>
</Window>
